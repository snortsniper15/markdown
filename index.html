<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdown to PDF Converter</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        textarea { width: 100%; height: 300px; margin-bottom: 10px; }
        button { padding: 10px 20px; background: #007bff; color: white; border: none; cursor: pointer; }
        button:hover { background: #0056b3; }
        #preview { 
            border: 1px solid #ccc; 
            padding: 10px; 
            margin-top: 20px; 
            display: none; 
            max-width: 800px; 
            margin: 0 auto; 
            font-family: 'Times New Roman', serif; 
            font-size: 12pt; 
            page-break-inside: avoid; 
        }
        #preview * { page-break-inside: avoid; }
        input[type="file"] { margin-bottom: 10px; }
    </style>
</head>
<body>
    <h1>Markdown to PDF Converter</h1>
    <p>Upload a .md file or paste your Markdown below, then click "Convert to PDF". The PDF will be generated as a continuous page without breaks, using Times New Roman font.</p>
    
    <!-- File upload option -->
    <label for="file-input">Upload Markdown File (.md):</label>
    <input type="file" id="file-input" accept=".md">
    
    <!-- Manual input -->
    <label for="markdown-input">Or Enter Markdown Manually:</label>
    <textarea id="markdown-input" placeholder="Enter Markdown here..."></textarea>
    
    <button onclick="convertToPDF()">Convert to PDF</button>
    <div id="preview"></div>

    <script>
        // Handle file upload
        document.getElementById('file-input').addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (file && file.name.endsWith('.md')) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('markdown-input').value = e.target.result;
                };
                reader.readAsText(file);
            } else {
                alert('Please select a valid .md file.');
            }
        });

        function convertToPDF() {
            const markdown = document.getElementById('markdown-input').value;
            if (!markdown.trim()) {
                alert('Please provide Markdown content either by uploading a file or entering it manually.');
                return;
            }
            const html = marked.parse(markdown);
            const preview = document.getElementById('preview');
            preview.innerHTML = html;
            preview.style.display = 'block';

            // Options to make PDF truly continuous (no page breaks, extremely tall page)
            const options = {
                margin: 10,
                filename: 'converted.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2 },
                jsPDF: { unit: 'mm', format: [210, 10000], orientation: 'portrait' }, // A4 width, very tall height for continuity
                pagebreak: { mode: 'avoid-all' } // Avoid all page breaks
            };

            // Generate PDF
            html2pdf().set(options).from(preview).save();
        }
    </script>
</body>
</html>
